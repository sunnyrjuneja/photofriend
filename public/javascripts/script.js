// Generated by CoffeeScript 1.6.2
$(function() {
  var hasNextPage, iosocket, loadItems, loadOnScroll;

  iosocket = io.connect();
  iosocket.on('new image', function(photo) {
    return $('#images').prepend('<div class="img-crop"><img src="' + photo.url + '"></div>');
  });
  filepicker.setKey('AvovSWfJJQCaOl9IhtTofz');
  $('#fpicker').click(function() {
    filepicker.pickAndStore({
      mimetype: 'image/*',
      maxSize: 2097152
    }, {}, function(fpfile) {
      return iosocket.emit('upload', fpfile[0]);
    }, function(fpfile) {
      return console.log("ERROR");
    });
    return false;
  });
  hasNextPage = true;
  $(document).ready(function() {
    return $(window).bind('scroll', loadOnScroll);
  });
  loadOnScroll = function() {
    if ($(window).scrollTop() > $(document).height() - ($(window).height() * 2)) {
      $(window).unbind();
      return loadItems();
    }
  };
  return loadItems = function() {
    if (!hasNextPage) {
      return false;
    } else {

    }
  };
});
